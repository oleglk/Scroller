<!-- Vals_by_Petrov -->

<!DOCTYPE HTML>

<html>
<head>

<style>
img {
  width: 75%;
}
</style>

<!-- Score/notes for "Vals_by_Petrov" -->
<script type="text/javascript">
////////////////////////////////////////////////////////////////////////////////


// TODO: pass 'g_tempo', 'g_tactsInLine', 'g_beatsInTact' from the HTML
// TODO: provide a way for user to force alternative 'g_tempo'
var g_tempo = 10*60;  //60; // beats-per-minute
var g_tactsInLine = 7;
var g_beatsInTact = 4;

const g_beatsForFullLine = g_tactsInLine * g_beatsInTact;
const g_fullLineInSec = g_beatsForFullLine * 60 / g_tempo;

var g_scoreLines = [
  {tag:"line-011-Begin", pageId:"pg01", x:0, y:0,    timeSec:g_fullLineInSec},
  {tag:"line-012-Begin", pageId:"pg01", x:0, y:190,  timeSec:g_fullLineInSec},
  {tag:"line-013-Begin", pageId:"pg01", x:0, y:414,  timeSec:g_fullLineInSec},
  {tag:"line-014-Begin", pageId:"pg01", x:0, y:640,  timeSec:g_fullLineInSec},
  {tag:"line-015-Begin", pageId:"pg01", x:0, y:850,  timeSec:g_fullLineInSec},
  {tag:"line-021-Begin", pageId:"pg02", x:0, y:0,    timeSec:g_fullLineInSec},
  {tag:"line-022-Begin", pageId:"pg02", x:0, y:217,  timeSec:g_fullLineInSec},
  {tag:"line-023-Begin", pageId:"pg02", x:0, y:432,  timeSec:g_fullLineInSec},
  {tag:"line-024-Begin", pageId:"pg02", x:0, y:656,  timeSec:g_fullLineInSec},
  {tag:"line-025-Begin", pageId:"pg02", x:0, y:884,  timeSec:g_fullLineInSec},
  {tag:"line-031-Begin", pageId:"pg03", x:0, y:0,    timeSec:g_fullLineInSec},
  {tag:"line-032-Begin", pageId:"pg03", x:0, y:272,  timeSec:g_fullLineInSec},
  {tag:"line-033-Begin", pageId:"pg03", x:0, y:538,  timeSec:g_fullLineInSec},
  {tag:"line-034-Begin", pageId:"pg03", x:0, y:760,  timeSec:g_fullLineInSec},
  {tag:"Control-Height", pageId:"pg01", x:0, y:1080, timeSec:0},  
  {tag:"Control-Height", pageId:"pg02", x:0, y:1080, timeSec:0},  
  {tag:"Control-Height", pageId:"pg03", x:0, y:1080, timeSec:0},  
];

////////////////////////////////////////////////////////////////////////////////
// Copies one score position record while modifying the duration field
function score_viewpoint(scoreLineObj, timeSec)
{
  let scoreStation = Object.assign(scoreLineObj);  // shallow copy is OK here
  scoreStation.timeSec = timeSec;
  return  scoreStation;
}
////////////////////////////////////////////////////////////////////////////////


// TODO, pass the whole array from the HTML ?table?
// TODO: double-check times
/* The grouped view-points are built assuming 3 lines are visible at each one.
 * Correspond to the intended order - with repetitions */
var g_scoreStations_Groupped = [
  {...score_viewpoint(g_scoreLines[0],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[2],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[4],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[6],   (1+4/7)   * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[0],   (2/6+1)   * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[2],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[4],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[6],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[8],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[10],  (1+1+2/4) * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[0],   (2/6+1)   * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[2],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[4],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[6],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[8],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[10],  (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[11],  (1+1+1)   * g_fullLineInSec)},
  g_scoreLines.find(x => (x.tag == "Control-Height")),
];

// TODO, pass the whole array from the HTML ?table?
// TODO: double-check times
/* The grouped view-points are built assuming 3 lines are visible at each one.
 * Correspond to the lazy order - without repetitions */
var g_scoreStations_Groupped_NoRepeat = [
  {...score_viewpoint(g_scoreLines[0],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[2],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[4],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[6],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[8],   (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[10],  (1+1)     * g_fullLineInSec)},
  {...score_viewpoint(g_scoreLines[11],  (1+1+1)   * g_fullLineInSec)},
  ...g_scoreLines.filter(x => (x.tag == "Control-Height")),
];

////////////////////////////////////////////////////////////////////////////////
// ... the copy will be 2-level deep - fine for the task
var g_scoreStations = g_scoreStations_Groupped_NoRepeat.map(a => {return {...a}});

// deep-copy 'pageId' into 'occId'
g_scoreStations.forEach(  l =>  { l.occId = `${l.pageId}` }  )
////////////////////////////////////////////////////////////////////////////////
</script>

<!-- Load the scrolling code -->
<script src="../Code/img_scroll.js"></script> 


</head>
<body
>

<img src="Cropped/Vals_by_Petrov__01.jpg" alt="Vals_by_Petrov__p1" id="pg01"/>
<img src="Cropped/Vals_by_Petrov__02.jpg" alt="Vals_by_Petrov__p2" id="pg02"/>
<img src="Cropped/Vals_by_Petrov__03.jpg" alt="Vals_by_Petrov__p3" id="pg03"/>

</body>
</html>

